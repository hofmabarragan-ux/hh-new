---
import Layout from "../../layouts/BaseLayout.astro";
import ServicesHero from "../../components/ServicesHero.astro";
import ServicesList from "../../components/ServicesList.astro";
import CTA from "../../components/CTA.astro";
import ContactForm from "../../components/ContactForm.astro";
import { i18n, languages } from "../../content/i18n";

/* OBLIGATORIO para rutas dinámicas */
export async function getStaticPaths() {
  return languages.map((lang) => ({
    params: { lang },
  }));
}

const { lang } = Astro.params;
const content = i18n[lang];

if (!content) {
  throw new Error(`Idioma no soportado: ${lang}`);
}
---

<Layout lang={lang} seo={content.seo}>

  <!-- HERO -->
  <ServicesHero
    title={content.services.hero.title}
    subtitle={content.services.hero.subtitle}
  />

  <!-- LISTA SERVICIOS -->
  <ServicesList items={content.services.list} />

  <!-- CTA BLOQUE CONVERSIÓN -->
  <section>
    <h2>{content.services.contact.title}</h2>
    <p>{content.services.contact.text}</p>

    <CTA
      label={content.ctas.primary.label}
      href="https://calendly.com/hofmahomes"
    />

    <CTA
      label="WhatsApp"
      href="https://wa.me/34600000000"
    />

    <CTA
      label="Email"
      href="mailto:hofmahomes@gmail.com"
    />
  </section>

  <!-- CONTACT FORM (ANCHOR GLOBAL) -->
  <section id="contact-form">
    <ContactForm
      title={content.contactForm.title}
      text={content.contactForm.text}
      button={content.contactForm.button}
    />
  </section>

</Layout>
