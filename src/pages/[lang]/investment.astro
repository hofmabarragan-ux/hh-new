---
import Layout from "../../layouts/BaseLayout.astro";
import ContactForm from "../../components/ContactForm.astro";

import { languages, getContent, type Lang } from "../../lib/i18n";

/* ✅ OBLIGATORIO para rutas dinámicas */
export async function getStaticPaths() {
  return languages.map((lang) => ({
    params: { lang },
  }));
}

const { lang } = Astro.params as { lang: Lang };
const content = getContent(lang) as any;

if (!content) {
  throw new Error(`Idioma no soportado: ${lang}`);
}

// Texto traducido (fallback local, por si todavía no está en i18n)
const introTextByLang: Record<Lang, string> = {
  es: "Cuéntanos tus objetivos y diseñamos una estrategia de inversión personalizada.",
  en: "Tell us about your goals and we will design a personalized investment strategy.",
  da: "Fortæl os om dine mål, så designer vi en personlig investeringsstrategi.",
};

const introText =
  content.investment?.introText ?? introTextByLang[lang] ?? introTextByLang.es;
---

<Layout lang={lang} seo={content.seo}>
  <section>
    <h1>{content.ctas.primary.label}</h1>

    <p>{introText}</p>

    <a href={content.ctas.primary.href}>
      {content.ctas.primary.label}
    </a>
  </section>

  <ContactForm
    title={content.contactForm.title}
    text={content.contactForm.text}
    button={content.contactForm.button}
  />
</Layout>
